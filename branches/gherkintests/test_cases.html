<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>Test Cases - WHO SMART Trust v1.1.6</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>
    <link href="assets/css/fa-all.css" rel="stylesheet" type="text/css" />
    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
    <link href="assets/css/who.css" rel="stylesheet"/>
    <link href="assets/css/lforms.min.css" rel="stylesheet"/>


    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"4.4"}
    h3,h4,h5,h6{--heading-prefix:"4.4"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->

      <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
        <div id="stripe"> </div>
        <div class="container">  <!-- container -->
          <!-- HEADER CONTENT -->
  
          <nav class="navbar navbar-inverse">
            <!--status-bar-->
            <div class="container">
              <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
                <span class="icon-bar"> </span>
                <span class="icon-bar"> </span>
                <span class="icon-bar"> </span>
              </button>
              <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
              <div class="nav-collapse collapse navbar-inverse-collapse">
                <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Home
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="index.html">Summary</a>
      </li>
      <li>
        <a href="dependencies.html">Dependencies</a>
      </li>
      <li>
        <a href="ethical_principles.html">Ethical Considerations and Data Protection Principles</a>
      </li>
      <li>
        <a href="faq.html">Frequently Asked Questions</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Business Requirements
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="concepts.html">Concepts</a>
      </li>
      <li>
        <a href="concepts_certificate_governance.html">Certificate Governance</a>
      </li>
      <li>
        <a href="concepts_onboarding.html">Onboarding Process</a>
      </li>
      <li>
        <a href="use_cases.html">Use Cases</a>
      </li>
      <li>
        <a href="decision_support.html">Decision Support Logic</a>
      </li>
      <li>
        <a href="functional.html">Functional Requirements</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Data Models and Exchange
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="system-actors.html">System Actors</a>
      </li>
      <li>
        <a href="transactions.html">Transactions</a>
      </li>
      <li>
        <a href="sequence-diagrams.html">Sequence Diagrams</a>
      </li>
      <li>
        <a href="trust_domains.html">Trust Domains</a>
      </li>
      <li>
        <a href="trust_network_gateway_architecture.html">Trust Network Gateway Architecture</a>
      </li>
      <li>
        <a href="concepts_did.html">DID Trustlist Specification</a>
      </li>
      <li>
        <a href="hcert_spec.html">HCERT Specification</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Deployment
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="concepts_onboarding_checklist.html">Onboarding Checklist</a>
      </li>
      <li>
        <a href="security_privacy.html">Security and Privacy Considerations</a>
      </li>
      <li>
        <a href="testing.html">Testing</a>
      </li>
      <li>
        <a href="test_cases.html">Test Cases</a>
      </li>
      <li>
        <a href="reference_implementation.html">Reference Implementations</a>
      </li>
      <li>
        <a href="downloads.html">Downloads</a>
      </li>
      <li>
        <a href="changes.html">Changes</a>
      </li>
      <li>
        <a href="endpoints.html">Endpoints</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Indices
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="artifacts.html">Artifact Index</a>
      </li>
      <li>
        <a href="references.html">References</a>
      </li>
      <li>
        <a href="maps.html">Mappings</a>
      </li>
      <li>
        <a href="license.html">License</a>
      </li>
    </ul>
  </li>
</ul>
              </div>  <!-- /.nav-collapse -->

              <div class="sf_colsIn col-md-8  navbar-right-container" data-sf-element="LanguageSelectorSearch" data-placeholder-label="Language Selector and Search" style="display: flex; justify-content: flex-end; align-items: center;">
                <!-- This div will be pushed to the right -->
                <div class="language-selector" style="margin-left: auto; background-color: #00477d; color: white;">
                  <i class="fa fa-language fa-lg"></i>
                  <label for="language-selector"> </label>
                  <select onChange="openLink(value)" id="language-selector" name="language-selector">
                    <option disabled selected>Select language</option>
                    <option value="en" class="selected">English</option>
                  </select>
                  <i class="fas fa-angle-down"></i>
                </div>
                <!-- Search Content -->
              </div>
            </div>  <!-- /.container -->
          </nav>  <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
        </div>  <!-- /container -->
      </div>  <!-- /segment-navbar -->
      

      <div class="container" style=" justify-content: space-between; align-items: left;">

        <!-- Placeholder for child template header declarations -->
<div id="project-nav">
    <a id="who-logo" no-external="true" href="index.html">
        
    </a>
</div>

 <div id="family-nav">
  <a id="fhir-logo" no-external="true" href="http://hl7.org/fhir">  </a>
</div> 


        <div id="ig-status" class="ig-status-draft">
          <p><span style="font-size:12pt;font-weight:bold">WHO SMART Trust</span>
            <br/>
            <span style="display:inline-block;">1.1.6 - CI Build



  <img alt="International flag" src="assets/images/001.svg" height="16" title="International"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->


    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><a href='deployment.html'><b>Deployment</b></a></li><li><b>Test Cases</b></li>

          <span style="float:right;">

            <a href="testing.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="reference_implementation.html">next&gt;</a>

          </span>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">WHO SMART Trust, published by WHO. This guide is not an authorized publication; it is the continuous build for version 1.1.6  built by the FHIR (HL7&reg; FHIR&reg; Standard) CI Build. This version is based on the current content of <a href='https://github.com/WorldHealthOrganization/smart-trust/tree/gherkintests'>https://github.com/WorldHealthOrganization/smart-trust/tree/gherkintests</a> and changes regularly. See the <a href='http://smart.who.int/trust/history.html'>Directory of published versions</a></p><!--EndReleaseHeader-->
  <h2>Test Cases</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div>
<!-- do not remove - needed to prevent Jekyll from adding a p tag to any non block level element in the markdown.-->
</div>
<p>This page will include test cases developed for the test scenarios, transactions and actors included in this implementation guide. See <a href="testing.html">Testing</a> for additional testing artifacts.</p>

<p>The testing artifacts in this implementation guide are not intended to be used to determine formal conformance, nor are they intended to be authoritative or comprehensive.</p>

<h3 id="utilize-hcert">Utilize HCERT</h3>

<div class="language-gherkin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">Feature</span><span class="p">:</span> Utilize HCERT


<span class="kn">Scenario</span><span class="p">:</span> Received QR code is a valid HCERT QR Code
GIVEN a Receiver is presented a QR Code
<span class="err">AND the QR code uses a format as defined in (ISO/IEC 18004</span><span class="p">:</span><span class="err">2015)</span>
<span class="err">AND</span> <span class="err">the</span> <span class="err">QR</span> <span class="err">code</span> <span class="err">uses</span> <span class="err">Alphanumeric</span> <span class="err">mode</span> <span class="err">(Mode</span> <span class="err">2)</span> <span class="err">encoding</span>
<span class="err">WHEN</span> <span class="err">the</span> <span class="err">Receiver</span> <span class="err">scans</span> <span class="err">the</span> <span class="err">QR</span> <span class="err">Code</span>
<span class="err">THEN</span> <span class="err">the</span> <span class="err">QR</span> <span class="err">code</span> <span class="err">is</span> <span class="err">successfully</span> <span class="err">decoded</span>
<span class="err">AND the decoded raw Alphanumeric string starts with "HC1</span><span class="p">:</span><span class="err">"</span> <span class="err">prefix</span>

<span class="nt">@negative</span>
<span class="kn">Scenario</span><span class="p">:</span> Received QR code is not a valid HCERT QR Code
GIVEN a Receiver is presented a QR Code
<span class="err">AND the QR code uses a format as defined in (ISO/IEC 18004</span><span class="p">:</span><span class="err">2015)</span>
<span class="err">AND</span> <span class="err">the</span> <span class="err">QR</span> <span class="err">code</span> <span class="err">uses</span> <span class="err">Base45</span> <span class="err">encoding</span>
<span class="err">AND</span> <span class="err">the</span> <span class="err">QR</span> <span class="err">code</span> <span class="err">uses</span> <span class="err">Alphanumeric</span> <span class="err">mode</span> <span class="err">(Mode</span> <span class="err">2)</span> <span class="err">encoding</span>
<span class="err">WHEN</span> <span class="err">the</span> <span class="err">Receiver</span> <span class="err">scans</span> <span class="err">the</span> <span class="err">QR</span> <span class="err">Code</span>
<span class="err">THEN</span> <span class="err">the</span> <span class="err">QR</span> <span class="err">code</span> <span class="err">is</span> <span class="err">successfully</span> <span class="err">decoded</span>
<span class="err">AND the decoded raw Alphanumeric string does not start with "HC1</span><span class="p">:</span><span class="err">"</span> <span class="err">prefix</span>
<span class="err">AND</span> <span class="err">the</span> <span class="err">QR</span> <span class="err">Code</span> <span class="err">is</span> <span class="err">rejected</span> <span class="err">with</span> <span class="nf">an </span>Error

<span class="kn">Scenario</span><span class="p">:</span> Received QR code is a valid HCERT QR Code and a correct CWT Token is retrieved
GIVEN a Receiver is presented a QR Code
WHEN Receiver decodes the raw Alphanumeric string from QR Code
<span class="err">AND removes the "HC1</span><span class="p">:</span><span class="err">"</span> <span class="err">prefix</span>
<span class="err">THEN</span> <span class="err">the</span> <span class="err">remaining</span> <span class="err">Alphanumeric</span> <span class="err">string</span> <span class="err">c</span><span class="nf">an </span>be Base45 decoded to retrieve a binary payload
<span class="err">AND</span> <span class="err">ZLIB</span> <span class="err">decompression</span> <span class="err">c</span><span class="nf">an </span>be applied to the binary payload
<span class="err">THEN the retrieved Payload is a valid CBOR Web Token (CWT) as defined [here](http</span><span class="p">:</span><span class="err">//smart.who.int/trust/StructureDefinition/CWT)</span>

<span class="kn">Scenario</span><span class="p">:</span> Retrieved CWT is valid
GIVEN a valid CBOR CWT token is decoded from a QR Code
WHEN THE CWT is parsed
<span class="err">THEN CWT structure validates against the StructureDefinition as defined [here](http</span><span class="p">:</span><span class="err">//smart.who.int/trust/StructureDefinition/CWT)</span>

<span class="kn">Scenario</span><span class="p">:</span> Validate supported signature algorithms
GIVEN a valid CWT
WHEN the Receiver validates the algorithm i.e. Claim '1' in the Header
<span class="err">THEN the algorithm is be one of the supported types</span><span class="p">:</span>
      <span class="p">|</span> <span class="nv">Algorithm</span> <span class="p">|</span> <span class="nv">COSE</span> <span class="nv">Parameter</span> <span class="p">|</span> <span class="nv">SOG-IT</span> <span class="nv">Level</span> <span class="p">|</span>
      <span class="p">|</span> <span class="n">ES256</span>     <span class="p">|</span> <span class="n">ES256</span>         <span class="p">|</span> <span class="n">Primary</span> <span class="n">(ECC</span> <span class="n">P-256)</span> <span class="p">|</span>
      <span class="p">|</span> <span class="n">PS256</span>     <span class="p">|</span> <span class="n">PS256</span>         <span class="p">|</span> <span class="n">Secondary</span> <span class="n">(RSA</span> <span class="n">PSS)</span> <span class="p">|</span>

<span class="kn">Scenario</span><span class="p">:</span> Validate Key Identifier - key is valid and onboarded to Trust Network
GIVEN a valid CWT Structure
WHEN the Receiver extracts the Key Identifier i.e. Claim '4' in the Header
AND extracts the Issuer i.e. Claim '1' from the Payload
THEN the extracted Key Id is 8 bytes
AND the extracted issuer is ISO 3166-1 alpha-2 Country Code
AND the public key can be retrieved from the trust network using the Country Code and Key Id

<span class="kn">Scenario</span><span class="p">:</span> Validate Signature of the CWT
GIVEN a valid CWT Structure
WHEN the Receiver extracts the public key of the issuer from the trust network that matches the Key Id in the COSE Header
AND the payload has not expired i.e. current time is between Issued at (Claim '6') and  Expiration Date (Claim '4') 
THEN the signature is cryptographically valid

<span class="kn">Scenario</span><span class="p">:</span> Extract HCERT Payload from validated CWT
GIVEN a CWT with verified signature
WHEN the Receiver extracts the HCERT Payload using claim key -260
<span class="err">THEN the extracted HCERT structure validates against the StructureDefinition as defined [here](http</span><span class="p">:</span><span class="err">//smart.who.int/trust/StructureDefinition/HCert)</span>

</code></pre></div></div>



</div>
</div>  <!-- /inner-wrapper -->
</div>  <!-- /row -->
</div>  <!-- /container -->
</div>  <!-- /segment-content -->

<script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
<script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

<script type="text/javascript" src="assets/js/window-hash.js"> </script>
<a name="bottom"> </a>
<div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
<div class="container">  <!-- container -->

<div style="background-color:var(--footer-nav-bg-color)">
  <table style="width:100%">
    <tbody>
      <tr>
        <td style="text-align:left">&#xA0;

          <a href="testing.html">&lt;prev</a>

        </td>
        <td style="text-align:center">
          <a href="#top">top</a>
        </td>
        <td style="text-align:right">&#xA0;

          <a href="reference_implementation.html">next&gt;</a>

        </td>
      </tr>
    </tbody>
  </table>
</div>

<div class="inner-wrapper">
  <p>
    IG &#169; 2023+ <a style="color:var(--footer-hyperlink-text-color)" href="http://who.int">WHO</a>.  Package smart.who.int.trust#1.1.6 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Wed, Sep 10, 2025 05:45+0000">2025-09-10</span>
    <br/>
    <span style="color: var(--footer-highlight-text-color)">
                Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
| <a style="color: #81BEF7" target="_blank" href="http://smart.who.int/trust/history.html">Version History</a> | <a style="color: #81BEF7" rel="license" href="license.html">License</a>
    </span>
  </p>
</div>  <!-- /inner-wrapper -->
</div>  <!-- /container -->
</div>  <!-- /segment-footer -->

<div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
<div class="container">  <!-- container -->
</div>  <!-- /container -->
</div>  <!-- /segment-post-footer -->

<!-- JS and analytics only. -->
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
<script type="text/javascript" src="assets/js/respond.min.js"> </script>
<script type="text/javascript" src="assets/js/anchor.min.js"> </script>
<script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
<script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
<script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
<!-- Analytics Below
================================================== -->


<div id="feedback-config"
 data-repo-owner=""
 data-repo-name=""
 data-repo-source="https://github.com/WorldHealthOrganization/smart-trust/issues/new?template=feedback.yml"
 data-issue-label="feedback"
 data-feedback-options="[{&quot;form&quot;:&quot;https://github.com/WorldHealthOrganization/smart-trust/issues/new?template=feedback.yml&quot;,&quot;type&quot;:&quot;GitHub&quot;,&quot;sectionid&quot;:&quot;section&quot;,&quot;pageid&quot;:&quot;page&quot;},{&quot;form&quot;:&quot;https://forms.office.com/e/WKxJWQMEcx&quot;,&quot;type&quot;:&quot;Form&quot;,&quot;sectionid&quot;:&quot;r275a700d161d41d182d84c2e58947298&quot;}]"
 style="display:none;"></div>

<script src="assets/js/feedback.js"></script>



